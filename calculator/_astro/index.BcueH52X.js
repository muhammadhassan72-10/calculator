import{aj as f,j as a}from"./hydration.C4XjvPX6.js";import{s as p}from"./utils.B-ZhoiGS.js";const r=[];function d(t,n=f){let e=null;const o=new Set;function s(n){if(a(t,n)&&(t=n,e)){const n=!r.length;for(const n of o)n[1](),r.push(n,t);if(n){for(let t=0;t<r.length;t+=2)r[t][0](r[t+1]);r.length=0}}}function i(n){s(n(t))}return{set:s,update:i,subscribe:function(r,u=f){const l=[r,u];return o.add(l),1===o.size&&(e=n(s,i)||f),r(t),()=>{o.delete(l),0===o.size&&e&&(e(),e=null)}}}}function h(t){let n;return p(t,(t=>n=t))(),n}export{h as g,d as w};